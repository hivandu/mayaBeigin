---
layout: post
title: 第一章 第四节 路径动画
categories:
- Maya
tags:
- Maya
- path
- 开始maya吧
- 第一章
published: true
comments: true
---
<p><a href="http://hivan.me/2008/03/20/begin-maya.html" target="_blank">回章目录选择</a></p>

<p><a href="http://hivan.me/2008/03/20/first-maya-animation.html" target="_blank">回节目录选择</a>
<!--more-->
<h4>本节概述</h4> <p>本节主要讲解如何制作物体沿路径运动的动画制作方法。物体的位移和旋转属性都会受到路径曲线的控制。</p> <h5>理解路径动画</h5> <p>路径动画是动画物体的移动和旋转属性的一种方式，它指定一条NURBS 曲线作为运动路径。用户可以使用路径动画来动画几何体（NURBS 或多边形）、灯光、摄像机、粒子或其他物体。通过操作作为路径的NURBS 曲线，用户就可以编辑物体的运动。当曲线的方向改变时，物体将会从一边到另一边自动地进行旋转。如果物体是几何体，那么物体的形状也可以随着曲线形状的改变而变形。</p> <h6>创建路径动画</h6> <h6>创建一个简单的路径动画</h6> <p>1 创建一条曲NURBS 线，这条曲线就是物体运动的路径。曲线的方向就是物体运动的方向，如图1.4.1所示。</p>  <p>&nbsp;</p> <p><a target="_blank" title="image001" href="http://www.flickr.com/photos/95019520@N00/2346627921/"><img alt="image001" src="http://farm3.static.flickr.com/3123/2346627921_36cd3594e3.jpg" border="0" /></a></p> <p>图1.4.1</p> <p>2 首先选择物体，然后按住Shift 键选择曲线，如图1.4.2所示。</p> <p>注意：用户可以通过先选择物体再选择曲线。当使多个物体沿同一条路径运动时，必须最后选择路径曲线。</p> <p><a target="_blank" title="image003" href="http://www.flickr.com/photos/95019520@N00/2346627727/"><img alt="image003" src="http://farm3.static.flickr.com/3051/2346627727_a6e98de9e2.jpg" border="0" /></a></p> <p>图1.4.2</p> <p>3 选择Animate &gt; Paths &gt; Attach to Path 命令。此时，物体将移动到曲线上，此处就是在当前时间物体在曲线上的位置。同时在曲线上会出现带有数字的两个运动路径标志，这些标记指示物体运动到此处的位置和时间，如图1.4.3所示。</p>  <p><a target="_blank" title="image005" href="http://www.flickr.com/photos/95019520@N00/2347458260/"><img alt="image005" src="http://farm3.static.flickr.com/3121/2347458260_1d83024724.jpg" border="0" /></a></p> <p>图1.4.3</p> <p>4 按下Play 按钮播放物体动画。</p> <h5>制作战斗机飞行动画</h5> <p>当用户沿路径曲线移动物体时，物体处于曲线上的不同点处，那么怎样为物体在不同位置设置时间呢？我们这部分中将对此进行解释。在这个例子中，使用Motion Path Manipulator Tool（运动路径操纵工具）沿路径曲线移动物体来创建一个路径动画。在下的例子中，Motion Path Manipulator Tool 被用于沿路径曲线移动一个简单的战斗机模型。</p> <p>实例教程</p> <h6>1 创建一个要沿路径运动的战斗机模型。</h6> <p>如图1.4.4所示。</p> <p><a target="_blank" title="image007" href="http://www.flickr.com/photos/95019520@N00/2346627587/"><img alt="image007" src="http://farm3.static.flickr.com/3067/2346627587_396140bf29.jpg" border="0" /></a></p> <p>图1.4.4</p>  <h6>2 为战斗机创建路径曲线。</h6> <p>如图1.4.5所示。</p> <p><a target="_blank" title="image009" href="http://www.flickr.com/photos/95019520@N00/2346627313/"><img alt="image009" src="http://farm3.static.flickr.com/3044/2346627313_2f8a813b44.jpg" border="0" /></a></p> <p>图1.4.5</p> <h6>3 设置路径动画参数</h6> <p>选择战斗机，然后按住Shift 键，单击曲线以选择它，选择Aniamte &gt; Paths &gt; Attach to Path，打开选项视窗。设置Time Range 项为Start，并设置Start Time 为1.0，确定Follow 项处于打开状态，然后按下Attach 按钮，选项窗口如图1.4.6所示。</p> <p>注意：战斗机的机头指向X轴的负方向，因此在选项窗口中要勾选Inverse Front选项。</p>  <p><a target="_blank" title="image011" href="http://www.flickr.com/photos/95019520@N00/2347457824/"><img alt="image011" src="http://farm3.static.flickr.com/2364/2347457824_a044d14d29.jpg" border="0" /></a></p> <p>图1.4.6</p> <p>战斗机移动到曲线的开始端，如图所示。用户将注意到，如果在时间滑块上拖动，战斗机不会沿曲线运动，因为它仅有一个与时间对应的位置。如图1.4.7所示。</p> <p><a target="_blank" title="image013" href="http://www.flickr.com/photos/95019520@N00/2346627137/"><img alt="image013" src="http://farm3.static.flickr.com/2338/2346627137_9715ea1421.jpg" border="0" /></a></p> <p>图1.4.7</p> <h6>4 显示motionPath节点</h6> <p>此时，战斗机正处于选择状态，用户将注意到，在通道盒的INPUTS 区，其中一个被列出的项目是motionPath1。这是控制路径动画的节点。在通道盒单击这个节点以选择motionPath1 节点。它的属性将在INPUTS 项的下面被列出。如图1.4.8所示。</p> <p><a target="_blank" title="image015" href="http://www.flickr.com/photos/95019520@N00/2346627055/"><img alt="image015" src="http://farm3.static.flickr.com/3189/2346627055_367b7ee98b.jpg" border="0" /></a></p> <p>图1.4.8</p> <h6>5 显示控制路径动画的操纵器</h6>  <p>在Maya 工具栏选择Show Manipulator Tool，以使用Motion Path Manipulator Tool 工具沿路径曲线移动战斗机。此时，用户会发现在此点出现了一个围绕物体的操纵器，如图1.4.9所示。</p> <p>Motion Path Manipulator 有两个手柄：</p> <p>l 操纵器中心的手柄用于沿路径定位物体。</p> <p>l 环形手柄用于控制路径动画向前的扭曲属性，也就是围绕前轴扭曲多少。后面的手柄可用于手动设置物体的倾斜程度。</p> <p><a target="_blank" title="image017" href="http://www.flickr.com/photos/95019520@N00/2346626997/"><img alt="image017" src="http://farm3.static.flickr.com/2032/2346626997_b20634065a.jpg" border="0" /></a></p> <p>图1.4.9</p> <h6>6 调整战斗机飞行的关键位置</h6> <p>战斗机当前被放置在曲线的开端，即在第1 帧时所处的位置。单击时间滑块，将时间移动到第10 帧处。单击操纵器中心的浅蓝色手柄，沿路径拖拽战斗机，移动战斗机到第10帧处的位置。</p> <h6>7设置路径位置关键帧</h6>  <p>为给物体在此位置设置关键帧，我们必须为motionPath1 节点的U Value 属性设置关键帧。这可以通过Keys（关键帧）菜单设置，或者在通道盒点击motionPath1 节点的U Value 属性，调用Channels &gt; Key Selected 功能。重复以上两个步骤，分别在第90帧和120帧设置曲线动画的关键帧，如图1.4.10所示。</p> <p><a target="_blank" title="image019" href="http://www.flickr.com/photos/95019520@N00/2347457380/"><img alt="image019" src="http://farm3.static.flickr.com/3039/2347457380_7b1d9a5863.jpg" border="0" /></a></p> <p>图1.4.10</p> <h6>8 调整飞机转向姿态动画</h6> <p>由于战斗机在转向过程会产生侧倾，所以需要调整战斗机在四个关键帧位置的姿态。回到第1帧，在通道盒点击motionPath1 节点的frontTwist 属性，调用通道盒菜单Channels &gt; Key Selected 功能，设置关键帧，在第10帧将frontTwist属性设置为50，设置关键帧；在第90帧将frontTwist属性设置为80，设置关键帧；在第120帧将frontTwist属性设置为0，设置关键帧。然后按下Play 按钮，观看路径动画。战斗机的飞行动画就非常逼真了，如图1.4.11所示。</p> <p>1<a target="_blank" title="image021" href="http://www.flickr.com/photos/95019520@N00/2346626851/"><img alt="image021" src="http://farm3.static.flickr.com/3196/2346626851_420c0bcc7e.jpg" border="0" /></a> 10<a target="_blank" title="image023" href="http://www.flickr.com/photos/95019520@N00/2346626737/"><img alt="image023" src="http://farm3.static.flickr.com/2201/2346626737_91c8fbc668.jpg" border="0" /></a></p>  <p>90<a target="_blank" title="image025" href="http://www.flickr.com/photos/95019520@N00/2347457126/<br>
"><img alt="image025" src="http://farm3.static.flickr.com/3161/2347457126_219cdee8fd.jpg" border="0" /></a> 120<a target="_blank" title="image027" href="http://www.flickr.com/photos/95019520@N00/2346626577/"><img alt="image027" src="http://farm3.static.flickr.com/2063/2346626577_baba23aa75.jpg" border="0" /></a></p> <p>图1.4.11</p> <h5>本节工具解析</h5> <h6>Attach to Path </h6> <p>路径动画工具。</p> <p>选择Motion Animate &gt; Paths &gt; Attach to Motion Path - 命令打开选项设置视窗并设置选项。</p>  <p>l <b>Time Range</b>（时间范围） 这些设置分别定义物体在曲线的开始和结束位置的开始时间和结束时间。</p> <p>l <b>Time Slider </b>此项使用时间滑块中的最小和最大时间作为路径曲线的开始和结束时间。</p> <p>l <b>Start </b>当选择此项时，在曲线的开始处创建一个标记，它指示物体被定位在曲线开始处的时间。如果使用该项和Motion Path Manipulator Tool 工具一起沿动画路径的不同位置和时间创建新标记，那么该项是非常有用的。</p> <p>l <b>Start/End </b>此项的时间分别指示物体在曲线的开始和结束位置被设定的时间。</p> <p>l <b>Start Time</b>（开始时间） 如果Time Range 中的Start 项被设置，那么此项才有效。</p>  <p>l <b>End Time</b>（结束时间） 如果Time Range 中的Start/End 项被选中，那么此项才有效。</p> <p>l <b>Parametric Length </b>设置Maya 沿曲线定位物体的方式，共有两种方式：参数间距方式和参数长度方式。在参数间距方式中，标记表示物体在曲线U 参数间距中的位置；而在参数长度方式中时，标记将按曲线总长度的百分比来表示物体的位置。参数长度方式也称为“分数模式”方式，因为路径的计算是基于路径曲线长度的分数上的。要了解这两种方式的不同，可通过一条带有统一参数和不均衡分布的空间CVs 的曲线来比较。</p> <p>l <b>Follow</b>（跟随） 当此项打开时，Maya 将会计算物体沿曲线运动的方向。</p> <p>Maya 使用前向量和顶向量来计算物体的方向。并把物体的局部坐标轴和这两个向量对齐，以便在物体沿曲线移动时Maya 知道物体的指向。</p> <p>在曲线的任意点，前向量都和曲线的切线对齐，并指向物体的运动方向。顶向量与切线是垂直的，但是也需要告诉Maya 切线的哪个垂直方向是向上的。这样做时，需要设置一个全局顶向量和顶向量对齐。使用World Up Type，World Up Vector 和 World Up Object 选项来设置全局顶向量。</p> <p>l 还需要告诉Maya 哪个物体的局部坐标轴应当和前向量对齐，及哪个和顶向量对齐。要观看物体的局部坐标轴，可选择物体并使用Display &gt; Component Display &gt; Local Rotation Axes.Next 命令。然后使用Front Axis 项设置哪个局部坐标轴和前向量对齐；并使用Up Axis 项设置哪个局部坐标轴和顶向量对齐。最后设置全局顶向量的类型（World Up Type）和哪个顶向量自身对齐。全局顶向量可使用户控制哪个顶向量指向顶部。使用它的一个好处是可纠正物体在运动时出现的突然翻转问题。比如，可以使全局顶向量成为某些物体的局部坐标轴，比如，定位器。然后通过操纵这个定位器来直接控制全局顶向量的方向。</p>  <p>l <b>Front Axis</b>（前方轴） 设置哪个物体的局部坐标轴和前向量对齐。当物体沿曲线运动时，设置物体的前向方向。</p> <p>n X 对齐局部X 轴和前向量，并使物体的X 轴作为物体的前方方向。</p> <p>n Y 对齐局部Y 轴和前向量，并使物体的Y 轴作为物体的前方方向。</p> <p>n Z 对齐局部Z 轴和前向量，并使物体的Z 轴作为物体的前方方向。</p> <p>l <b>Up Axis</b>（上方轴） 设置哪个物体的局部坐标轴和顶向量对齐。当物体沿曲线运动时，设置物体的上方方向。顶向量和由World Up Type 设置的全局顶向量对齐。</p> <p>n X 对齐局部X 轴和顶向量，并设置物体的X 轴作为物体的上方方向。</p> <p>n Y 对齐局部Y 轴和顶向量，并设置物体的Y 轴作为物体的上方方向。</p>  <p>n Z 对齐局部Z 轴和顶向量，并设置物体的Z 轴作为物体的上方方向。</p> <p>l <b>World Up Type </b>此项设置与顶向量对齐的全局顶向量的类型。其中包括下列选项：Scene Up、Object Up、Object Rotation Up、Vector 和 Normal。</p> <p>l <b>Scene Up </b>设置与场景上方轴对齐的顶向量，而不是与全局顶向量对齐。全局顶向量被忽略。用户可以在Preferences 视窗中设置场景的上方轴。默认场景上方轴是全局空间中的Y 轴正半轴。</p> <p>l <b>Object Up </b>设置与设置物体的原点对齐而不是与全局顶向量对齐，全局顶向量被忽略。原点与顶向量对齐的物体被称为全局顶物体。可以使用World Up Object 项来设置全局顶物体。如果没有设置全局顶物体，那么顶向量将会和场景的全局空间原点对齐。</p> <p>l <b>Object Rotation Up </b>设置定义的全局顶向量与一些相关物体的局部空间对齐，而不是场景的全局空间。在顶向量转换到相关场景全局空间后，它将与全局顶向量对齐。原点与顶向量对齐的物体被称为全局顶物体。可以使用World Up Object 项来设置全局顶物体。</p>  <p>l <b>Vector </b>设置顶向量与全局顶向量尽可能的对齐。被定义的全局顶向量是和场景的全局空间对应的（这是默认设置），使用World Up Vector 项可设置这个全局顶向量的方向。</p> <p>l <b>Norma</b>l 选择此项，则物体的上方轴总是尽量匹配路径曲线的法线方向。根据路径曲线是曲面上的曲线，还是在全局空间中的曲线，其法线的插值方式也是不同的。当路径曲线是全局空间中的曲线时，其曲线上某点法线的方向总是指向此点在曲线上的曲率中心，在下的图表中的箭头就指示了在曲线各个点上的法线方向。</p> <p>注意：曲线由凹变为凸时，法线将会翻转180 度，反之亦然。</p> <p>当在路径动画中使用全局空间曲线时，如果为Up Direction 使用Normal 项可能得不到需要的结果。当路径曲线是表面上的曲线时，曲线上某点的法线方向是此点处表面的法线方向。当路径曲线是表面上的曲线时，那么选择此项可以产生比较直觉的效果。</p> <p>l <b>World Up Vector </b>设置与场景全局空间对应的全局顶向量的方向。因为在默认状况下，Maya 的全局空间是“Y-up”，所以在全局空间正Y 轴方向上的全局顶向量点是 (0.0000，1.0000，0.0000)。</p> <p>l <b>World Up Object </b>如果设置World Up Type 为Object Up 或 Object Rotation Up，那么该项设置要与物体对齐的全局顶向量。</p>  <p>l <b>Inverse Up</b>（反转上方向） 当选择此项时，物体的上方轴总是采用“Up Direction”选项中选择方向的反方向。</p> <p>l <b>Inverse Front</b>（翻转前方向） 翻转物体沿曲线的前方向。当用户在定位摄像机，以便摄像机沿曲线指向前方时，那么使用该项是非常有用的。比如，有一个沿曲线指向后方的摄像机，但是要使摄像机指向前方却很是的困难，那么可激活InverseFront 项，使摄像机按需要沿曲线指向前方。</p> <p>l <b>Bank</b>（倾斜） 此选项可使物体在运动时，向着曲线的曲率中心倾斜（就像摩托车在转弯时总是向里倾斜）。该项只有在Follow 项打开时才有效，并且此选项也会影响物体的旋转运动。路径动画会根据路径曲线的弯曲自动计算出应该出现的倾斜程度。用户可使用Bank Scale（倾斜缩放）和Bank Limit（倾斜限制）调整倾斜度。</p> <p>n <b>Bank Scale</b>（倾斜缩放） 使用此项可以调节倾斜的效果，如果增大设置，则倾斜效果会更明显。例如，如果把Bank Scale<br />
 设置为2，则物体的倾斜程度是默认程度的2倍。</p> <p>注意：如果为Bank Scale 输入负值，则物体会向外倾斜，而不是向着路径曲线的曲率中心。例如，用户可以使用该项去制作过山车中的角色动画，使角色向另一边倾斜。</p>  <p>n <b>Bank Limit</b>（倾斜限制） 此选项可以限制倾斜的数量。例如，倾斜缩放的增加可获得显著的倾斜效果，但是这可能导致在曲线弯曲程度大的地方，物体倾斜的程度太大。此项将把倾斜程度限制到设置值范围内。</p> <p>注意：当沿直线运动时，倾斜效果不会出现。</p> </p>
